<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算机网络笔记02 应用层 | Hi, Dai</title><meta name="keywords" content="note"><meta name="author" content="Dai Sine"><meta name="copyright" content="Dai Sine"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="2.1 应用层协议原理网络应用程序体系结构应用程序研发很可能利用两种主流的体系结构之一:客户-服务端体系结构:  服务器:  持续地工作(365*24)   固定的、周知的地址(IP地址)   备有数据中心">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络笔记02 应用层">
<meta property="og:url" content="https://daisine.github.io/cn2/index.html">
<meta property="og:site_name" content="Hi, Dai">
<meta property="og:description" content="2.1 应用层协议原理网络应用程序体系结构应用程序研发很可能利用两种主流的体系结构之一:客户-服务端体系结构:  服务器:  持续地工作(365*24)   固定的、周知的地址(IP地址)   备有数据中心">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://daisine.github.io/img/mai7.ico">
<meta property="article:published_time" content="2018-06-08T04:31:36.000Z">
<meta property="article:modified_time" content="2020-01-02T07:29:36.140Z">
<meta property="article:author" content="Dai Sine">
<meta property="article:tag" content="note">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://daisine.github.io/img/mai7.ico"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://daisine.github.io/cn2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-117497526-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-117497526-4');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络笔记02 应用层',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-01-02 15:29:36'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">63</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/mai7.ico')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hi, Dai</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络笔记02 应用层</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-06-08T04:31:36.000Z" title="Created 2018-06-08 12:31:36">2018-06-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-01-02T07:29:36.140Z" title="Updated 2020-01-02 15:29:36">2020-01-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络笔记02 应用层"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="2-1-应用层协议原理"><a href="#2-1-应用层协议原理" class="headerlink" title="2.1 应用层协议原理"></a>2.1 应用层协议原理</h2><h4 id="网络应用程序体系结构"><a href="#网络应用程序体系结构" class="headerlink" title="网络应用程序体系结构"></a>网络应用程序体系结构</h4><p>应用程序研发很可能利用两种主流的体系结构之一:<br><strong><code>客户-服务端体系结构</code>:</strong></p>
<ul>
<li>服务器: </li>
<li>持续地工作(365*24)  </li>
<li>固定的、周知的地址(<code>IP地址</code>)  </li>
<li>备有数据中心  <span id="more"></span> </li>
<li>客户端:</li>
<li>与服务器端通信  </li>
<li>间歇地工作  </li>
<li>可能更换地址  </li>
<li>客户端不直接通信(客户总能通过该服务器的IP地址<code>发送分组</code>来与其进行联系)  </li>
</ul>
<p><strong><code>对等/P2P体系结构</code>:</strong></p>
<ul>
<li>没有常开的服务器</li>
<li>任意端系统之间直接通信  </li>
<li>端系统是对等的  </li>
<li>具有自扩展性  </li>
<li>间歇地工作  </li>
<li>管理起来比较复杂  </li>
<li>适用于流量密集型的应用，如文件共享、下载加速、IP电话、IPTV  </li>
</ul>
<h4 id="进程通信P59"><a href="#进程通信P59" class="headerlink" title="进程通信P59"></a>进程通信P59</h4><p><code>进程</code>：主机上运行的程序。<br><code>进程之间如何通信</code>：</p>
<ul>
<li>同一主机内部(操作系统)：</li>
<li>管道、共享内存</li>
<li>由操作系统控制</li>
<li>不同主机之间</li>
<li>主机可能安装了不同的操作系统</li>
<li>使用<code>套接字(Socket)</code>机制，<code>API</code></li>
<li>通过网络建立通信</li>
</ul>
<p><strong>客户和服务器进程</strong>：发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务器。</p>
<p><strong>进程与计算机网络之间的接口<code>套接字</code></strong><br>是应用程序进程和运输层协议之间的接口, 类似于“门”的概念。通过套接字，不同端系统的进程可以进行网络通信。</p>
<blockquote>
<p>由于套接字也成为应用程序和网络之间的<strong>应用程序接口/API</strong>套接字是一种软件接口(API)</p>
</blockquote>
<p><strong>进程寻址</strong>：主机由<code>IP地址</code>标识。<code>目的地端口号</code>用于标识运行在接收主机上的接收进程/接收套接字。</p>
<h4 id="可供应用层使用的运输服务P61"><a href="#可供应用层使用的运输服务P61" class="headerlink" title="可供应用层使用的运输服务P61"></a>可供应用层使用的运输服务P61</h4><ul>
<li>可靠数据传输</li>
<li>正确：数据差错检验</li>
<li>完整：分组丢失后重传</li>
<li>eg.需要可靠传输的应用：文件传输、邮件、远程访问..</li>
<li><code>吞吐量</code>：可用吞吐量就是发送进程向接收进程交付比特的速率。</li>
<li>越大当然越好</li>
<li>应用程序对吞吐量的需求不同</li>
<li><code>带宽敏感的应用</code>：带宽敏感，具有吞吐量要求的应用程序多媒体传输</li>
<li><code>弹性应用</code>：根据情况或多或少利用可供使用的吞吐量，如电子邮件、文件传输、Web传送…</li>
<li>定时/实时性：</li>
<li>保证较小的时间延迟，</li>
<li>eg.因特网电话、会议 </li>
<li>安全</li>
<li>数据不被非法读取、篡改、伪造等</li>
<li>提供加解密、认证、签名等机制(SSL／TLS)</li>
<li>eg.电子交易、保密通信</li>
</ul>
<table>
<thead>
<tr>
<th align="center">应用</th>
<th align="center">数据丢失</th>
<th align="center">吞吐量(书上是带宽)</th>
<th align="center">时间敏感</th>
</tr>
</thead>
<tbody><tr>
<td align="center">文件传输</td>
<td align="center">不能丢失</td>
<td align="center">弹性</td>
<td align="center">no</td>
</tr>
<tr>
<td align="center">电子邮件</td>
<td align="center">不能丢失</td>
<td align="center">弹性</td>
<td align="center">no</td>
</tr>
<tr>
<td align="center">Web文档</td>
<td align="center">不能丢失</td>
<td align="center">弹性</td>
<td align="center">no</td>
</tr>
<tr>
<td align="center">实时媒体</td>
<td align="center">容忍丢失</td>
<td align="center">audio: 5kbps-1Mbps; video:10kbps-5Mbps</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">yes, 100’s msec</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">存储媒体</td>
<td align="center">容忍丢失</td>
<td align="center">同上</td>
<td align="center">yes, few secs</td>
</tr>
<tr>
<td align="center">交互式游戏</td>
<td align="center">容忍丢失</td>
<td align="center">few kbps up</td>
<td align="center">yes, 100’s msec</td>
</tr>
<tr>
<td align="center">即时通讯</td>
<td align="center">不能丢失</td>
<td align="center">弹性</td>
<td align="center">yes and no</td>
</tr>
</tbody></table>
<h4 id="因特网提供的运输服务"><a href="#因特网提供的运输服务" class="headerlink" title="因特网提供的运输服务"></a>因特网提供的运输服务</h4><p><strong>TCP：可靠传输服务</strong></p>
<ul>
<li>保障收发进程之间的可靠传输</li>
<li>流控制: 发送速度不大于接收速度 </li>
<li>拥塞控制: 对发送速度进行调节</li>
<li>分组排序、丢失重传等</li>
<li>是一种面向连接服务</li>
<li>但不能保障: </li>
<li>带宽(吞吐量)</li>
<li>最低时延</li>
<li>安全性</li>
</ul>
<p><strong>UDP：尽力交付服务</strong></p>
<ul>
<li>不保证收发进程的可靠传输</li>
<li>没有流控制</li>
<li>没有拥塞控制</li>
<li>没有分组排序和重传机制</li>
<li>是一种无连接服务 </li>
<li>也不能保障</li>
<li>带宽(吞吐量)</li>
<li>最低时延</li>
<li>安全性</li>
</ul>
<table>
<thead>
<tr>
<th>应用类别</th>
<th>应用层协议</th>
<th>依靠的传输协议</th>
</tr>
</thead>
<tbody><tr>
<td>电子邮件</td>
<td>SMTP [RFC 2821]</td>
<td>TCP</td>
</tr>
<tr>
<td>远程访问控制</td>
<td>Telnet [RFC 854]</td>
<td>TCP</td>
</tr>
<tr>
<td>Web</td>
<td>HTTP [RFC 2616]</td>
<td>TCP</td>
</tr>
<tr>
<td>文件传输</td>
<td>FTP [RFC 959]</td>
<td>TCP</td>
</tr>
<tr>
<td>流式多媒体</td>
<td>HTTP(如yotube)</td>
<td>TCP</td>
</tr>
<tr>
<td>因特网电话</td>
<td>SIP[RFC 3261]、RTP{RFC 3550]、或专用的(如Skype)</td>
<td>UDP/TCP</td>
</tr>
</tbody></table>
<h4 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h4><p><code>应用层协议</code>定义了运行在不同端系统上的应用程序进程如何相互传递报文。</p>
<ul>
<li>报文类别，如：request, response </li>
<li>报文格式(语法)：报文的字段有哪些；字段描述</li>
<li>报文语义: 报文的处理方法；报文的各个字段的含义</li>
<li>报文处理规则：请求和相应时如何发送报文；处理流程</li>
<li>通用协议如何规约</li>
<li>通过RFC来定义标准化</li>
<li>允许互操作</li>
<li>非标准化的专用协议：可由开发者自己定制，如：Skype</li>
</ul>
<p>应用层协议只是网络应用的一部分。如，Web的应用层协议为HTTP，但是Web应用的组成部分包括文档格式标准(HTML)，Web浏览器，Web服务器以及一个应用层协议HTTP。</p>
<h2 id="2-2-Web和HTTP"><a href="#2-2-Web和HTTP" class="headerlink" title="2.2 Web和HTTP"></a>2.2 Web和HTTP</h2><h4 id="WWW、HTTP"><a href="#WWW、HTTP" class="headerlink" title="WWW、HTTP"></a>WWW、HTTP</h4><p><code>World Wide Web</code>：万维网，因特网中最重要的应用<br><code>HTTP</code>：超文本传输协议，Web的应用层协议</p>
<h4 id="HTTP概况"><a href="#HTTP概况" class="headerlink" title="HTTP概况"></a>HTTP概况</h4><ul>
<li>client/server 模式</li>
<li>client: 浏览器，请求，接收和， “现实” Web对象</li>
<li>server: Web服务器程序，响应客户端的请求，如返回Web对象</li>
<li>依赖于TCP的传输服务:</li>
<li>客户端初始化一个TCP连接 (创建TCP套接字)到服务器端, <strong>默认目标端口80</strong></li>
<li>服务器端接收TCP的连接请求</li>
<li>HTTP协议开始工作：客户端请求Web对象，服务器端响应</li>
<li>TCP连接终止</li>
<li>HTTP是“无状态”协议:</li>
<li>服务器不维持客户端的状态(历史)：不需要维护哪个客户端在什么时候做了什么</li>
<li>只要客户端请求即予以响应，来者不拒</li>
<li>维持“状态”是一件复杂的事情：要记录历史数据，并保证一致性</li>
<li>可以让应用程序来处理，如开发Web应用程序、进行会话管理、记录流程、日志etc</li>
</ul>
<h4 id="HTTP的两种连接方式"><a href="#HTTP的两种连接方式" class="headerlink" title="HTTP的两种连接方式"></a>HTTP的两种连接方式</h4><ul>
<li>非持久性连接  HTTP/1.0：建立TCP连接后最多只能请求一个Web对象</li>
<li>浏览器并发TCP/HTTP连接</li>
<li>为每一个请求的对象建立和维护全新的连接，需要分配TCP缓冲区和保持TCP变量(负担)</li>
<li>每一个对象经受两倍往返时间rrt的交付时延</li>
<li>持久性连接  HTTP/1.1：在一个TCP连接期间可以请求多个Web对象</li>
<li>HTTP/1.1默认使用的是带流水线方式的持久性连接，效率更高</li>
</ul>
<h4 id="HTTP的报文格式"><a href="#HTTP的报文格式" class="headerlink" title="HTTP的报文格式"></a>HTTP的报文格式</h4><ul>
<li>报文编码：ASCII(人类可读)</li>
<li>报文类别：</li>
<li>请求报文 (客户端发送，服务器端处理)</li>
<li>响应报文 (服务器端发送，客户端处理)</li>
</ul>
<p><strong>请求报文</strong><br><img src="0.png" width="60%" height="60%" /></p>
<ul>
<li>请求方法</li>
<li>GET: 获取Web对象，扩展URL(可提交数据)，实体体为空</li>
<li>POST: 提交Web表单，封装在实体数据</li>
<li>HEAD: 调试</li>
<li>PUT: 上传Web对象(HTTP/1.1)</li>
<li>DELETE: 删除Web对象(HTTP/1.1)</li>
<li>URL</li>
<li>Web路径：/folder </li>
<li>Web对象标识：/object.obj </li>
<li>Web对象?参数：/object.obj?p1&amp;p2 </li>
</ul>
<p><strong>响应报文</strong><br><img src="1.png" width="60%" height="60%" /></p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>短语</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>OK 请求成功</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently 请求的对象已经被永久转移了</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request 一个通用差错代码，指示该请求不能被服务器理解</td>
</tr>
<tr>
<td>404</td>
<td>Not Found 被请求的文档不再服务器上</td>
</tr>
<tr>
<td>505</td>
<td>HTTP Version Not Supported 服务器不支持请求报文使用的HTTP协议版本</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified ，原来缓冲的文档还可以继续使用P77</td>
</tr>
</tbody></table>
<h4 id="用户与服务器的交互-cookie"><a href="#用户与服务器的交互-cookie" class="headerlink" title="用户与服务器的交互: cookie"></a>用户与服务器的交互: cookie</h4><ul>
<li>HTTP是无状态协议：如何让服务器知道用户先前做过什么？ Cookie</li>
<li>在HTTP请求和响应的首部行设定cookie</li>
<li>客户端保存cookies</li>
<li>服务器端通过cookie与后台数据库关联</li>
</ul>
<p><strong>P73 图2-10 跟踪用户状态</strong><br>cookie可以在无状态的HTTP之上建立一个用户会话层，主要用于：<strong>授权，购物车，推荐，用户会话状态管理，个性化推荐</strong></p>
<ul>
<li>怎样保持状态? </li>
<li>协议：通过复杂的交互过程</li>
<li>cookies：让报文内容承载状态信息</li>
<li>应用程序：如会话管理</li>
</ul>
<h4 id="Web缓存P74"><a href="#Web缓存P74" class="headerlink" title="Web缓存P74"></a>Web缓存P74</h4><ul>
<li>Web代理服务器</li>
<li>用户可以通过代理服务器访问外部网站</li>
<li>既是客户端，又是服务器</li>
<li>Web缓存的作用</li>
<li>减少请求/响应时间</li>
<li>流量本地化</li>
<li>减少接入网络流量</li>
<li>更好地实现内容分发(eg.CDN)</li>
</ul>
<p>#####实例分析：<br>假设：</p>
<ul>
<li>Web对象的平均长度: 1M bits</li>
<li>客户端的平均请求率:15个/sec</li>
<li>客户端的数据传输速率: 1.50 Mbps</li>
<li>从浏览器到服务器的往返时间: 2 sec</li>
<li>接入网络的带宽: 15 Mbps</li>
</ul>
<p>结果：</p>
<ul>
<li>局域网流量强度: 15%</li>
<li><strong>接入网流量强度 = 100%(!problem)</strong></li>
<li>total delay = Internet delay 2秒+ <strong>access delay 若干分钟(排队时延)</strong>+ LAN delay 若干微秒</li>
</ul>
<p>昂贵的改进方法——增加接入链路的速率<br>接入网络的带宽: 15 Mbps - &gt; 100 Mbps</p>
<ul>
<li>局域网流量强度: 15%</li>
<li><strong>接入网流量强度 = 15%</strong></li>
<li>total delay = Internet delay 2秒+ <strong>access delay 若干毫秒</strong>+ LAN delay 若干微秒</li>
</ul>
<p><img src="2.png" width="40%" height="40%" /><img src="3.png" width="35%" height="435%" /></p>
<p>另一种改进方法：在机构网络中安装一个Web缓存器<br>如何计算设置缓存后的时延:</p>
<ul>
<li>设缓存中对象的命中率为 0.4</li>
<li>40% 的请求可以在缓存中获取</li>
<li>60% 的请求在远程服务器获取 </li>
<li>接入链路利用率: </li>
<li>60% 的请求在远程服务器获取 </li>
<li>接入网络传输速度 = 0.6*15 Mbps = 9 Mbps </li>
<li>利用率= 9Mbps/15Mbps =60%</li>
<li> 平均时延(概率)</li>
<li>= 0.6 * 服务器端时延 +0.4 * 缓存时延</li>
<li>= 0.6 (2.01) + 0.4 (~msecs) </li>
<li>= ~ 1.2 secs</li>
</ul>
<h4 id="条件GET方法"><a href="#条件GET方法" class="headerlink" title="条件GET方法"></a>条件GET方法</h4><p>Web缓存的问题：如何保证缓存中的对象是最新的？<br><code>条件GET方法</code>：HTTP协议中的一种机制，允许缓存器证实它的对象是最新的</p>
<ul>
<li>目标: 如果缓存中的对象是新的，就没必要再去远程服务器获取</li>
<li>减少时延</li>
<li>降低外部带宽利用率</li>
<li>缓存: 为每个对象设置版本信息</li>
<li>If-modified-since: <date></li>
<li>服务器: 如果缓存的对象是最新的，服务器端不需再响应: </li>
<li>HTTP/1.0 304 Not Modified</li>
</ul>
<h3 id="2-3-FTP-文件传输协议"><a href="#2-3-FTP-文件传输协议" class="headerlink" title="2.3 FTP: 文件传输协议"></a>2.3 FTP: 文件传输协议</h3><ul>
<li>向远程服务器端收发文件</li>
<li>client/server 模式</li>
<li>client: 初始化连接(任何时候都是从客户端发起)</li>
<li>server: 远程主机</li>
<li>ftp server: port 21，20</li>
<li>服务器端默认<code>端口号21</code> 用于对客户端认证</li>
<li>服务器会在接收到文件传输请求时，打开<code>端口号20</code>的端口来进行传输数据文件。</li>
</ul>
<p>FTP客户端连接服务器端使用TCP提供可靠传输服务有两类连接：控制、传输 </p>
<ul>
<li>控制连接：</li>
<li>服务器端默认端口号：21</li>
<li>建立控制连接时需要对客户端验证</li>
<li>客户端向服务器端发送交互式命令</li>
<li>是有状态的协议，可控制客户端的最近登录验证、历史信息等</li>
<li>控制连接是<strong>持久性</strong>的</li>
<li>传输连接：</li>
<li>服务器端接收到文件传输的请求时，会打开传输连接(20端口)用于文件传输</li>
<li>当这个文件传输结束后，第二个连接会被服务器端关闭</li>
<li>传输连接是<strong>非持久性</strong>的</li>
<li>“带外传输”</li>
</ul>
<p>一些常用命令P79:</p>
<ul>
<li>sent as ASCII text over control channel</li>
<li>USER username：用于向服务器传送用户标识</li>
<li>PASS password：用于向服务器发送用户口令</li>
<li>LIST return list of file in current directory</li>
<li>RETR filename retrieves (gets) file</li>
<li>STOR filename stores (puts) file onto remote host</li>
</ul>
<p>常见的服务器响应代码：</p>
<ul>
<li>status code and phrase (as in HTTP)</li>
<li>331 Username OK, password required(用户名OK，需要口令)</li>
<li>125 data connection already open; transfer starting(数据连接已经打开，开始传送)</li>
<li>425 Can’t open data connection(无法打开数据连接)</li>
<li>452 Error writing file(写文件差错)</li>
</ul>
<h3 id="2-4-因特网中的电子邮件"><a href="#2-4-因特网中的电子邮件" class="headerlink" title="2.4 因特网中的电子邮件"></a>2.4 因特网中的电子邮件</h3><p><strong>三个主要组件</strong></p>
<ul>
<li>用户代理：即：邮件收发读写软件</li>
<li>eg.Outlook, Foxmail, Thundbird</li>
<li>邮件服务器：发送、接收邮件</li>
<li>邮件协议</li>
<li>发送协议：SMTP </li>
<li>接收协议：PoP3、IMAP</li>
<li>报文协议：MIME</li>
</ul>
<h4 id="简单邮件传输协议-SMTP"><a href="#简单邮件传输协议-SMTP" class="headerlink" title="简单邮件传输协议:SMTP"></a>简单邮件传输协议:SMTP</h4><ul>
<li>使用TCP的可靠传输服务,</li>
<li>端口号：25</li>
<li>直接传输: 从发送端的服务器到接收端的服务器</li>
<li>传输的三个阶段:握手(greeting)、报文传输、结束</li>
<li>使用交互式命令</li>
<li>commands: ASCII text</li>
<li>response: status code and phrase</li>
<li>报文编码格式：7-bit ASCII</li>
</ul>
<img src="4.png" width="80%" height="80%" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">S: 220 hamburger.edu C: HELO crepes.fr S: 250  Hello crepes.fr, pleased to meet you C: MAIL FROM: &lt;alice@crepes.fr&gt; S: 250 alice@crepes.fr... Sender ok C: RCPT TO: &lt;bob@hamburger.edu&gt; S: 250 bob@hamburger.edu ... Recipient ok C: DATA S: 354 Enter mail, end with &quot;.&quot; on a line by itself C: Do you like ketchup? C: How about pickles? C: . S: 250 Message accepted for delivery C: QUIT S: 221 hamburger.edu closing connection</span><br></pre></td></tr></table></figure>

<ul>
<li>SMTP：持久性连接</li>
<li>在一个连接中可以进行多次操作</li>
<li>可以发送多个邮件、群发邮件</li>
<li>通过退出(Quit)来关闭连接</li>
<li>SMTP：报文都是7bit ASCII编码</li>
<li>SMTP：使用 crlf.crlf 作为报文结束符</li>
</ul>
<table>
<thead>
<tr>
<th>SMTP</th>
<th>HTTP</th>
</tr>
</thead>
<tbody><tr>
<td>推协议(push):向服务器端发送</td>
<td>拉协议(pull)：向服务器端请求</td>
</tr>
<tr>
<td>使用ASCII对报文进行编码</td>
<td>使用ASCII对报文进行编码</td>
</tr>
<tr>
<td>报文可以封装<strong>多个对象</strong>(email附件)</td>
<td>每个响应报文只能封装1个web对象</td>
</tr>
</tbody></table>
<ul>
<li>RFC 822: 用于定义邮件的格式:</li>
<li>首部行</li>
</ul>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> From: alice&amp;crepes.fr</span><br><span class="line"> To: bob@hamburger.edh</span><br><span class="line"> Subject: Searching for the meaning of life ``` - Body: 邮件正文(ASCII characters only，BASE 64编码)</span><br><span class="line">#### 邮件访问协议(接收方) </span><br><span class="line">- POP: Post Office Protocol [RFC 1939] - 认证(agent &lt;--&gt;server)和下载 - IMAP: Internet Mail Access Protocol [RFC 1730] - 更多的功能(更复杂) - 可在服务器端操作邮件- HTTP: Hotmail , Yahoo! Mail, etc.**POP3**</span><br><span class="line">- 认证阶段</span><br><span class="line"> - 客户端命令:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p> user: declare username<br> pass: password</p>
<pre><code>- 服务器端响应:
</code></pre>
<p>+OK<br>-ERR</p>
<p>```</p>
<ul>
<li>传输阶段, 客户端的命令:</li>
<li>list: 列出邮件的索引</li>
<li>retr: 根据编号接收邮件</li>
<li>dele: 删除某个编号的邮件</li>
<li>quit</li>
</ul>
<table>
<thead>
<tr>
<th>POP3</th>
<th>IMAP</th>
</tr>
</thead>
<tbody><tr>
<td>download and delete 在其他客户端无法读取</td>
<td>报文都在服务器端存储</td>
</tr>
<tr>
<td>download-and-keep 客户端和服务器端双份</td>
<td>允许用户创建文件夹</td>
</tr>
<tr>
<td>POP3是无状态的协议</td>
<td>在会话周期内维护用户的状态</td>
</tr>
</tbody></table>
<h3 id="2-5-因特网的目录服务"><a href="#2-5-因特网的目录服务" class="headerlink" title="2.5 因特网的目录服务"></a>2.5 因特网的目录服务</h3><p>因特网中标识一个主机：</p>
<ul>
<li>主机名：<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a>, mail.cqu.edu.cn ……  </li>
</ul>
<blockquote>
<p>人容易记住某个主机的名字，而不是IP地址<br>主机别名：一个主机也会有很多别名<br>**<code>域名</code>**：.edu .cn .uk</p>
</blockquote>
<ul>
<li>IP地址：32bit 编码 (点分十进制表示：202.202.0.35)</li>
<li>机器之间相互识别</li>
<li>路由器通过IP地址对分组进行路由、转发</li>
</ul>
<h4 id="DNS-因特网的目录服务"><a href="#DNS-因特网的目录服务" class="headerlink" title="DNS 因特网的目录服务"></a>DNS 因特网的目录服务</h4><p><strong>DNS提供的服务</strong>(因特网中的一个核心服务)：</p>
<ul>
<li>将主机名映射为IP地址</li>
<li>可对服务器的负载进行均衡</li>
<li>获得主机别名对应的规范化主机名及主机的IP地址</li>
<li>邮件服务器别名</li>
</ul>
<h4 id="DNS工作机理概述"><a href="#DNS工作机理概述" class="headerlink" title="DNS工作机理概述"></a>DNS工作机理概述</h4><ul>
<li>DNS工作在应用层：</li>
<li>DNS服务不直接与用户打交道</li>
<li>不封装用户的应用数据报文</li>
<li>只协助源主机查询出目标主机的IP地址</li>
<li>DNS是一个分布式的数据库系统：</li>
<li>DNS是一个分布式的数据库系统：</li>
<li>通过<strong>层级化</strong>的域名服务器进行工作</li>
<li>DNS的分布式查询方式: </li>
<li><code>迭代查询</code></li>
<li><code>递归查询</code></li>
</ul>
<p><img src="5.png" width="40%" height="40%" /><img src="6.png" width="40%" height="40%" /></p>
<ul>
<li>DNS的缓存机制</li>
<li>作用：改善时延、减少DNS报文数量</li>
<li>服务器查询到映射关系后，将会缓存此映射关系</li>
<li>每个缓存的映射关系具有一定的生命周期（如2天）</li>
<li>顶级DNS服务器一般缓存本地DNS服务器的映射关系（减少根服务器的负担）</li>
<li>由IETF制定并维护标准 RFC 2136</li>
<li>本地主机上面也有缓存</li>
</ul>
<blockquote>
<p><strong>层级化的域名服务器</strong></p>
</blockquote>
<ul>
<li>根DNS服务器：用于查询顶级DNS服务器的地址</li>
<li>顶级DNS服务器：用于查询下一级或权威DNS服务器的地址</li>
<li>提供了权威的主机名和IP地址映射，由组织机构或服务提供商来维护</li>
<li>eg. .net/.edu/.org/.com/.uk/.cn</li>
<li>权威DNS服务器：组织机构自身的DNS服务器</li>
<li>提供了权威的主机名和IP地址映射，由组织机构或服务提供商来维护</li>
<li>本地DNS服务器：</li>
<li>不属于严格意义上层级DNS体系</li>
<li>每个本地ISP、公司、大学都会部署</li>
<li>主机的DNS查询都会先提交给本地DNS服务器</li>
<li>具有缓存和代理的功能</li>
</ul>
<blockquote>
<p><strong>为什么要分布式、层级化？而不是集中化？</strong></p>
</blockquote>
<p>集中化的问题：</p>
<ul>
<li>单点故障：会导致全局失效</li>
<li>通信容量：会导致拥塞</li>
<li>远距离的集中式数据库：增大时延</li>
<li>维护困难</li>
<li>难于扩展</li>
</ul>
<h4 id="DNS记录"><a href="#DNS记录" class="headerlink" title="DNS记录"></a>DNS记录</h4><ul>
<li>使用分布式的数据库来存储资源记录</li>
<li>资源记录格式：四元组</li>
<li>RR format: (name, value, type, ttl)</li>
<li>name：主机名或域名</li>
<li>value：主机名映射的IP地址或DNS服务器名</li>
<li>type：记录类型</li>
<li>Type=A，value是该主机名对应的IP地址；(<a target="_blank" rel="noopener" href="http://www.cqu.edu.cn/">www.cqu.edu.cn</a>, 202.202.0.35, A)</li>
<li>Type=NS， value是该域名中的DNS服务器；(cqu.edu.cn, dns.cqu.edu.cn, NS)</li>
<li>Type=CNAME，value是该主机名对应的规范主机名</li>
<li>Type=MX， value是该邮件服务器名对应的规范主机名</li>
<li>ttl：记录的生存周期(time to live)</li>
</ul>
<h4 id="DNS报文"><a href="#DNS报文" class="headerlink" title="DNS报文"></a>DNS报文</h4><img src="7.png" width="65%" height="65%" />  
查询报文、回答报文：两者格式相同

<ul>
<li>报文首部(12 bytes)</li>
<li>标识符(16bit)：匹配查询和回答</li>
<li>标志位(16bit)：是查询 还是 回答；是否权威的回答；希望递归；递归可用</li>
<li>问题：name, type</li>
<li>回答：name, value, type, ttl，可能有多个记录</li>
<li>权威</li>
<li>附加</li>
</ul>
<h4 id="向DNS数据库中插入记录"><a href="#向DNS数据库中插入记录" class="headerlink" title="向DNS数据库中插入记录"></a>向DNS数据库中插入记录</h4><ul>
<li>机构注册：向权威机构注册本机构的DNS信息</li>
<li>向相关机构注册本机构的域名</li>
<li>向上级DNS服务器注册本机构的权威DNS服务器<br>Type=NS：该域中的权威DNS服务器是哪个主机(networkutopia.com,dns1.networkutopia.com, NS)<br>Type=A：权威DNS服务器的IP地址是多少(dns1.networkutopia.com,212.212.212.1, A)</li>
<li>权威DNS服务器中的记录更新</li>
<li>对组织机构内部的主机、地址映射信息进行维护：<code>静态配置</code>、<code>动态更新</code></li>
</ul>
<h3 id="2-6-P2P应用"><a href="#2-6-P2P应用" class="headerlink" title="2.6 P2P应用"></a>2.6 P2P应用</h3><h4 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h4><ul>
<li>纯P2P架构</li>
<li>没有Sever</li>
<li>任意端系统可以直连</li>
<li>端点间歇连接</li>
<li>可能会更换IP地址</li>
<li>典型应用</li>
<li>文件分发：BitTorrent</li>
<li>流媒体传输：Kankan</li>
<li>因特网电话：Skype</li>
<li>混合架构</li>
<li>Server：追踪器、帐户管理等</li>
</ul>
<h4 id="P2P文件分发"><a href="#P2P文件分发" class="headerlink" title="P2P文件分发"></a>P2P文件分发</h4><ul>
<li> 一台服务器S向N个主机(peers)分发一个大文件(大小为F bits)</li>
<li>服务器的<strong>上载</strong>能力u<sub>s</sub>；</li>
<li>端点i的<strong>上载</strong>和<strong>下载</strong>能力分别为u<sub>i</sub>和d<sub>i</sub>；</li>
</ul>
<h5 id="1-使用C-S模式进行分发"><a href="#1-使用C-S模式进行分发" class="headerlink" title="1.使用C/S模式进行分发"></a>1.使用C/S模式进行分发</h5><ul>
<li>服务器端：</li>
<li>S必须向每个客户端上载1个拷贝</li>
<li>发送1个拷贝的时间：t=F/u<sub>s</sub></li>
<li>发送N个拷贝的时间：t<sub>total</sub>=NF/u<sub>s</sub></li>
<li>客户端</li>
<li>每个端点必须获得一个拷贝</li>
<li>设dmin=客户端的最低下载速率</li>
<li>客户端的最长下载时间：F/d<sub>min</sub></li>
<li>文件分发时间：D<sub>c/s</sub>≥max{NF/u<sub>s</sub>, F/d<sub>min</sub>}，随着N的增加，时间线性增长</li>
</ul>
<h5 id="2-使用P2P进行分发"><a href="#2-使用P2P进行分发" class="headerlink" title="2.使用P2P进行分发"></a>2.使用P2P进行分发</h5><ul>
<li>服务器端</li>
<li>S必须上载至少1个拷贝</li>
<li>所需上载时间：t<sub>u=</sub>F/u<sub>s</sub></li>
<li>客户端</li>
<li>每个端点必须获得一个拷贝：td=F/d<sub>min</sub></li>
<li>客户群</li>
<li>必须下载N个拷贝，总体上载速率为u<sub>s</sub>+∑u<sub>i</sub></li>
<li>文件分发时间：Dp2p≥max{F/u<sub>s</sub>, F/d<sub>min</sub>, NF/(u<sub>s</sub>+ ∑u<sub>i</sub>)}</li>
</ul>
<p><img src="8.png" width="50%" height="50%" /><img src="9.png" width="40%" height="40%" /></p>
<h4 id="BitTorrent文件分发协议"><a href="#BitTorrent文件分发协议" class="headerlink" title="BitTorrent文件分发协议"></a>BitTorrent文件分发协议</h4><ul>
<li>文件被分为大小为256Kb的块</li>
<li>洪流中的端点发送和接收这些文件块</li>
</ul>
<img src="10.png" width="40%" height="40%" />

<ul>
<li>请求文件块：最稀缺优先</li>
<li>在某一时刻：不同的端点，文件块集也不同</li>
<li>在某段时间：Alice周期性地向邻居索问他们的文件块索引，随后请求这些所需的文件块</li>
<li>最稀缺优先原则</li>
<li>所有邻居中某个块的数量最少，则先请求这个块。Why?</li>
<li>响应文件块：礼尚往来</li>
<li>疏通：确定给自己发送块最快的几个对等方</li>
<li>tit-for-tat：看谁对我好(给我传的快)，我也对他好(给她/他传得也快)</li>
</ul>
<h4 id="分布式哈希表DHT"><a href="#分布式哈希表DHT" class="headerlink" title="分布式哈希表DHT"></a>分布式哈希表DHT</h4><ul>
<li>基于P2P模式的分布式数据库</li>
<li>数据库的基本思想：键值对</li>
<li>键：账号，值：口令(eg. 键：学号，值：成绩)</li>
<li>集中式数据库</li>
<li>C/S架构</li>
<li>分布式数据库</li>
<li>P2P架构</li>
<li>在大量的peer上面存储键值对</li>
<li>分布式哈希表DHT </li>
</ul>
<p>DHT的应用：一个peer通过键来查询，获得这个键对应的值</p>
<blockquote>
<p>应用场景：<br>键：”Logen” ；Alice通过这个键来查询谁有这个影片<br>值：拥有这个影片副本的peer(IP地址)</p>
</blockquote>
<h5 id="如何创建分布式哈希表？"><a href="#如何创建分布式哈希表？" class="headerlink" title="如何创建分布式哈希表？"></a>如何创建分布式哈希表？</h5><ul>
<li>核心问题：怎么把键值对分配到peer中?</li>
<li>基本思想：</li>
<li>把每个键都通过Hash变成整数，并为每个peer进行<strong>整数标识</strong></li>
<li>把键值对插入到<strong>与这个整数最接近的端点</strong>中</li>
<li>具体操作：</li>
<li>用n bit的整数(如n=64),可表示的整数区间为[0, 2n-1]</li>
<li>把每个键都用整数表示：Key=hash(“Logen”)=20161858，所以称之为分布式hash表 </li>
<li>插入键值：</li>
<li>规则：把键值插入到与peer ID最接近的peer上</li>
<li>与这个整数相等的节点，或与这个整数最临近的后继节点</li>
</ul>
<h5 id="怎样查找出键值对"><a href="#怎样查找出键值对" class="headerlink" title="怎样查找出键值对"></a>怎样查找出键值对</h5><table>
<thead>
<tr>
<th>环状DHT，覆盖网络</th>
<th>具有捷径的环状DHT</th>
</tr>
</thead>
<tbody><tr>
<td>每个节点只知道它的邻居(前驱、后继)</td>
<td>每个节点知道它的邻居以及它的两个捷径</td>
</tr>
<tr>
<td>算法复杂度(最差情况): O(N)</td>
<td>算法复杂度: O(log N)</td>
</tr>
</tbody></table>
<ul>
<li>对等方扰动: 等同于链表中删除一个节点</li>
<li>Peer记住它的两个后继定时检查两个后继是否存在(Ping一下)</li>
<li>若直接后继退离，将第二后继设为直接后继</li>
<li>Peer可能随时加入：</li>
<li>查询：先问一下DHT自己的前驱和后继是谁</li>
<li>通知：向前驱和后继发送报文</li>
<li>更新：本节点、前驱和后继均要更新</li>
</ul>
<h3 id="2-7-TCP套接字编程"><a href="#2-7-TCP套接字编程" class="headerlink" title="2.7 TCP套接字编程"></a>2.7 TCP套接字编程</h3><p><code>套接字</code>：在主机端、由应用进程创建、由操作系统控制的接口，一个应用进程可以向另一个进程发送或接收报文。<br><code>套接字编程</code>：对应于传输层的服务，有两种类型的套接字</p>
<ul>
<li><code>四元组</code>TCP：可靠的，面向字节流的传输，封装为报文段(segment)</li>
<li><code>二元组</code>UDP：不可靠的传输，封装为用户数据报(user datagram)</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Dai Sine</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://daisine.github.io/cn2/">https://daisine.github.io/cn2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/note/">note</a></div><div class="post_share"><div class="social-share" data-image="/img/mai7.ico" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/cn3/"><img class="prev-cover" src="/img/mai2.ico" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">计算机网络笔记03 运输层</div></div></a></div><div class="next-post pull-right"><a href="/cn1/"><img class="next-cover" src="/img/mai9.ico" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">计算机网络笔记01 计算机网络和因特网</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/CG/" title="计算机图形学笔记及练习"><img class="cover" src="/img/mai3.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-12-21</div><div class="title">计算机图形学笔记及练习</div></div></a></div><div><a href="/Cryptography/" title="密码学笔记"><img class="cover" src="/img/mai7.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-12-01</div><div class="title">密码学笔记</div></div></a></div><div><a href="/cky/" title="C语言-考研专业课笔记"><img class="cover" src="/img/mai3.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-01-02</div><div class="title">C语言-考研专业课笔记</div></div></a></div><div><a href="/cn1/" title="计算机网络笔记01 计算机网络和因特网"><img class="cover" src="/img/mai9.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-08</div><div class="title">计算机网络笔记01 计算机网络和因特网</div></div></a></div><div><a href="/cn3/" title="计算机网络笔记03 运输层"><img class="cover" src="/img/mai2.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-08</div><div class="title">计算机网络笔记03 运输层</div></div></a></div><div><a href="/cn4/" title="计算机网络笔记04 网络层"><img class="cover" src="/img/mai3.ico" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-08</div><div class="title">计算机网络笔记04 网络层</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Dai Sine</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">63</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">17</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">12</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/daisine" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:daisine@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">2.1 应用层协议原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.0.1.</span> <span class="toc-text">网络应用程序体系结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1P59"><span class="toc-number">1.0.2.</span> <span class="toc-text">进程通信P59</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E4%BE%9B%E5%BA%94%E7%94%A8%E5%B1%82%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1P61"><span class="toc-number">1.0.3.</span> <span class="toc-text">可供应用层使用的运输服务P61</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.0.4.</span> <span class="toc-text">因特网提供的运输服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.0.5.</span> <span class="toc-text">应用层协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Web%E5%92%8CHTTP"><span class="toc-number">2.</span> <span class="toc-text">2.2 Web和HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WWW%E3%80%81HTTP"><span class="toc-number">2.0.1.</span> <span class="toc-text">WWW、HTTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E6%A6%82%E5%86%B5"><span class="toc-number">2.0.2.</span> <span class="toc-text">HTTP概况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E7%9A%84%E4%B8%A4%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">2.0.3.</span> <span class="toc-text">HTTP的两种连接方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.0.4.</span> <span class="toc-text">HTTP的报文格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92-cookie"><span class="toc-number">2.0.5.</span> <span class="toc-text">用户与服务器的交互: cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Web%E7%BC%93%E5%AD%98P74"><span class="toc-number">2.0.6.</span> <span class="toc-text">Web缓存P74</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6GET%E6%96%B9%E6%B3%95"><span class="toc-number">2.0.7.</span> <span class="toc-text">条件GET方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-FTP-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.1.</span> <span class="toc-text">2.3 FTP: 文件传输协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%AD%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">2.4 因特网中的电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-SMTP"><span class="toc-number">2.2.1.</span> <span class="toc-text">简单邮件传输协议:SMTP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.3.</span> <span class="toc-text">2.5 因特网的目录服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS-%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.3.1.</span> <span class="toc-text">DNS 因特网的目录服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">DNS工作机理概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E8%AE%B0%E5%BD%95"><span class="toc-number">2.3.3.</span> <span class="toc-text">DNS记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E6%8A%A5%E6%96%87"><span class="toc-number">2.3.4.</span> <span class="toc-text">DNS报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%91DNS%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95"><span class="toc-number">2.3.5.</span> <span class="toc-text">向DNS数据库中插入记录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-P2P%E5%BA%94%E7%94%A8"><span class="toc-number">2.4.</span> <span class="toc-text">2.6 P2P应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.1.</span> <span class="toc-text">体系结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#P2P%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91"><span class="toc-number">2.4.2.</span> <span class="toc-text">P2P文件分发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8C-S%E6%A8%A1%E5%BC%8F%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8F%91"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">1.使用C&#x2F;S模式进行分发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8P2P%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8F%91"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">2.使用P2P进行分发</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BitTorrent%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.4.3.</span> <span class="toc-text">BitTorrent文件分发协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E5%93%88%E5%B8%8C%E8%A1%A8DHT"><span class="toc-number">2.4.4.</span> <span class="toc-text">分布式哈希表DHT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%9F"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">如何创建分布式哈希表？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%8E%E6%A0%B7%E6%9F%A5%E6%89%BE%E5%87%BA%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-number">2.4.4.2.</span> <span class="toc-text">怎样查找出键值对</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-TCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B"><span class="toc-number">2.5.</span> <span class="toc-text">2.7 TCP套接字编程</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mysql/" title="软件设计编写中mysql related"><img src="/img/mai5.ico" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="软件设计编写中mysql related"/></a><div class="content"><a class="title" href="/mysql/" title="软件设计编写中mysql related">软件设计编写中mysql related</a><time datetime="2022-08-15T07:31:21.000Z" title="Created 2022-08-15 15:31:21">2022-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/qt-ide/" title="QtCreator/VS2015/Clion配置"><img src="/img/mai2.ico" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="QtCreator/VS2015/Clion配置"/></a><div class="content"><a class="title" href="/qt-ide/" title="QtCreator/VS2015/Clion配置">QtCreator/VS2015/Clion配置</a><time datetime="2022-07-08T08:32:22.000Z" title="Created 2022-07-08 16:32:22">2022-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/qt-class/" title="Qt开发笔记"><img src="/img/mai4.ico" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qt开发笔记"/></a><div class="content"><a class="title" href="/qt-class/" title="Qt开发笔记">Qt开发笔记</a><time datetime="2022-07-08T01:45:12.000Z" title="Created 2022-07-08 09:45:12">2022-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mac-ntfs/" title="Mac 读写ntfs U盘"><img src="/img/mai11.ico" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mac 读写ntfs U盘"/></a><div class="content"><a class="title" href="/mac-ntfs/" title="Mac 读写ntfs U盘">Mac 读写ntfs U盘</a><time datetime="2022-07-05T08:20:28.000Z" title="Created 2022-07-05 16:20:28">2022-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/qt-msvc-clion/" title="Qt5.12 + MSVC2015 +(VS2015 + clion)环境搭建"><img src="/img/mai5.ico" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qt5.12 + MSVC2015 +(VS2015 + clion)环境搭建"/></a><div class="content"><a class="title" href="/qt-msvc-clion/" title="Qt5.12 + MSVC2015 +(VS2015 + clion)环境搭建">Qt5.12 + MSVC2015 +(VS2015 + clion)环境搭建</a><time datetime="2022-06-21T07:20:07.000Z" title="Created 2022-06-21 15:20:07">2022-06-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2023 By Dai Sine</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>